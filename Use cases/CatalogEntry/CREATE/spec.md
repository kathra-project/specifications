# Create catalog entry


The developer adds a catalog entry when he wants to publish a package.A catalog entry can be public or not, and it's associated to group.
Only group members can update and delete a catalog entry.

A catalog entry contains some packaging.
These packages are assets, each asset contains a source repository and pipeline for its publication.

Some kind of packaging can be associated to a catalog entry :
 - HELM
 - KUSTOMIZE
 - APT
 - APK
 - SNAP

## Use case : Generated by implementation

In default, the catalog entry is created after implementation generation.

| Label               | Granularité | Type de donnée | Description                                                     | Exemples                             |
|---------------------|-------------|----------------|-----------------------------------------------------------------|--------------------------------------|
| Implementation's version | 1           | ImplementationVersion         | UUID from ImplementationVersion | b8353684-6c68-418e-951f-117aab16b14d |
| Template            | 1           | PACKAGE_TEMPLATE | Kind of template generation      | REST_API_TEMPLATE                               |
| Description         | 1           | string         | Description de l'entrée dans le catalog (spécificités du choix d'implem)| Controleur de msg utilisant RabbitMQ |


## Use case : From Scratch

Form following :

| Label               | Granularité | Type de donnée | Description                                                     | Exemples                             |
|---------------------|-------------|----------------|-----------------------------------------------------------------|--------------------------------------|
| Group          | 1           | text | Group's name               | MSM/WP1                                  |
| Name | 1           | String         | Catalog entry's name  | UserManagerSecurity |
| Version | 1           | String         | Catalog entry's name | 1.0.0 |
| Template            | 1           | PACKAGE_TEMPLATE | Template used for generation     | REST_TEMPLATE                               |
| Description         | 1           | string         | Description | Spring web service manage credential  |
| Arguments            | 1           | map[string,string] | Arguments for template generation     | [{"imageName": "my-rest-service", "imageTag":"1.0.0"}]                               |


La création d'une nouvelle implémentation se fait depuis la page de visualisation des détails d'une API.
Le nom de l'API Version utilisée pour cette implémentation est donc **déduit**.


## Règles de gestion:

**RG_CREATEIMPLEM_01**: L'utilisateur doit pouvoir renseigner le nom de son implémentation. celui-ci sera accolé au nom de l'API pour générer un nom d'implémentation unique.  
*ex:* API UserManager, Implémentation: LDAP -> usermanager-ldap

**RG_CREATEIMPLEM_02**: L'utilisateur doit pouvoir choisir le langage dans lequel sera généré son implémentation, parmis la liste des langages proposés par SMITE.  
*ex:* Python

**RG_CREATEIMPLEM_03**: L'utilisateur doit pouvoir choisir la version pour laquelle l'implémentation sera développée (chiffres séparés par des points). Selon le langage choisi, un suffixe nécessaire aux versions en développement sera ajouté (Java : -SNAPSHOT). 
Cette version d'implémentation ne doit pas déjà exister dans le système.
*ex:* 1.0.0

**RG_CREATEIMPLEM_04**: L'utilisateur doit pouvoir renseigner la description de son implémentation. Il est convenu que ce champ servira notamment à renseigner les spécificités des choix du langage et du type d'implémentation retenus.
*ex:* Ce gestionnaire d'utilisateurs en python interface un Active Directory pour permettre la lecture, l'édition ou la création d'informations relatives aux utilisateurs qui y sont référencés.

**RG_CREATEIMPLEM_05**: L'utilisateur doit pouvoir valider la création de son implémentation, une fois tous les champs renseignés, et recevoir un feedback, positif ou négatif (réussi, échoué), par exemple à l'aide d'une notification.

**RG_CREATEIMPLEM_06**: L'utilisateur doit pouvoir être redirigé sur la page de détails de l'implémentation qu'il vient de créer en cas de succès.

**RG_CREATEIMPLEM_07**: L'utilisateur doit pouvoir être notifié de la nature de l'erreur survenue lorsque la création de son implémentation échoue.

**RG_CREATEIMPLEM_08**: L'utilisateur doit pouvoir à tout moment annuler l'opération en cours et retourner aux détails de l'API Version à partir de laquelle il souhaitait créer une nouvelle implémentation.