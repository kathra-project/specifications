swagger: '2.0'
info:
  title: Kathra Core Model
  version: 1.3.0-SNAPSHOT
  x-artifactName: core
  x-groupId: org.kathra
paths: 
  /no-operation:
    get:
      summary: "empty"
      operationId: "empty"
      produces:
        - "application/json"
      parameters: []
      responses:
        200:
          description: "empty"
          schema:
            type: "string"
definitions:
  BinaryRepositoryType:
    type: string
    enum: &BinaryRepositoryType
    - JAVA
    - PYTHON
    - DOCKER
    - HELM
  PACKAGE_TEMPLATE:
    type: string
    enum: &PACKAGE_TEMPLATE
    - REST_API
  PACKAGE_TYPE:
    type: string
    enum: &PACKAGE_TYPE
    - HELM
    - KUSTOMIZE
    - APT
    - SNAP
  MEMBERSHIP_ROLE:
    type: string
    enum: &MEMBERSHIP_ROLE
    - GUEST
    - CONTRIBUTOR
    - MANAGER
  MEMBERSHIP_MEMBERTYPE:
    type: string
    enum: &MEMBERSHIP_MEMBERTYPE
    - USER
    - GROUP
  PROGRAMMING_LANGUAGE:
    type: string
    enum: &PROGRAMMING_LANGUAGE
    - JAVA
    - PYTHON
  LIBRARY_TYPE:
    type: string
    enum: &LIBRARY_TYPE
    - MODEL
    - INTERFACE
    - CLIENT
  PIPELINE_TEMPLATE:
    type: string
    enum: &PIPELINE_TEMPLATE
    - JAVA_LIBRARY
    - JAVA_SERVICE
    - PYTHON_LIBRARY
    - PYTHON_SERVICE
  RESOURCE_STATUS:
    type: string
    enum: &RESOURCE_STATUS
    - PENDING
    - READY
    - UPDATING
    - UNSTABLE
    - ERROR
    - DELETED
  RuntimeJobStatus:
    type: string
    enum: &RuntimeJobStatus
    - SCHEDULED
    - RUNNING
    - SUCCESS
    - FAILED
  RuntimeAppInstanceStatus:
    type: string
    enum: &RuntimeAppInstanceStatus
    - DEPLOYED
    - PENDING
    - FAILED
  RuntimeVolumeStatus:
    type: string
    enum: &RuntimeVolumeStatus
    - PROVISIONING
    - AVAILABLE
    - TERMINATING
  RuntimeContainerStatus:
    type: string
    enum: &RuntimeContainerStatus
    - CREATING
    - RUNNING
    - PAUSED
    - TERMINATING
    - EXIT_WITH_SUCCES
    - EXIT_WITH_ERROR
  RuntimeEnvironmentBackupStatus:
    type: string
    enum: &RuntimeEnvironmentBackupStatus
    - SCHEDULED
    - PROCESSING
    - DONE
    - FAILED
  ApiVersion:
    allOf:
    - $ref: '#/definitions/Resource'
    - type: object
      properties:
        component:
          type: array
          items:
            $ref: '#/definitions/Component'
        version:
          type: string
        released:
          type: boolean
        apiRepositoryStatus:
          enum: *RESOURCE_STATUS
        implementationVersions:
          $ref: '#/definitions/ImplementationVersion'
        librariesApiVersions:
          $ref: '#/definitions/LibraryApiVersion'
  Asset:
    allOf:
    - $ref: '#/definitions/Resource'
    - type: object
      properties:
        sourceRepository:
          $ref: '#/definitions/SourceRepository'
        pipeline:
          type: array
          items:
            $ref: '#/definitions/Pipeline'
  BinaryRepository:
    type: object
    properties:
      binaryRepositoryType:
          enum: *BinaryRepositoryType
      url:
          type: string
      provider:
          type: string
      providerId:
          type: string
      snapshot:
          type: boolean
  CatalogEntry:
    allOf:
    - $ref: '#/definitions/Resource'
    - type: object
      properties:
        packageTemplate:
          enum: *PACKAGE_TEMPLATE
        icon:
          type: string
  CatalogEntryVersion:
    type: object
    properties:
      version:
          type: string
  CatalogEntryArgument:
    type: object
    properties:
      label:
          type: string
      description:
          type: string
      key:
          type: string
      value:
          type: string
      constraint:
          type: string
  CatalogEntryPackage:
    allOf:
    - $ref: '#/definitions/Asset'
    - type: object
      properties:
        packageType:
          enum: *PACKAGE_TYPE
        packaprovidergeType:
          type: string
        packagproviderIdeType:
          type: string
        url:
          type: string
  Component:
    allOf:
    - $ref: '#/definitions/Resource'
    - type: object
      properties:
        description:
          type: string
        title:
          type: string
        apiRepository:
          $ref: '#/definitions/SourceRepository'
        versions:
          $ref: '#/definitions/ApiVersion'
        implementations:
          $ref: '#/definitions/Implementation'
        libraries:
          $ref: '#/definitions/Library'
  Group:
    type: object
    properties:
      path:
          type: string
      parent:
          $ref: '#/definitions/Group'
      sourceRepositoryStatus:
          enum: *RESOURCE_STATUS
      sourceMembershipStatus:
          enum: *RESOURCE_STATUS
      pipelineFolderStatus:
          enum: *RESOURCE_STATUS
      binaryRepositoryStatus:
          enum: *RESOURCE_STATUS
  Membership:
    type: object
    properties:
      path:
          type: string
      role:
          enum: *MEMBERSHIP_ROLE
      memberType:
          enum: *MEMBERSHIP_MEMBERTYPE
      memberName:
          type: string
  Assignation:
    allOf:
    - $ref: '#/definitions/Resource'
    - type: object
      properties:
        role:
          type: string
        fte:
          type: string
  Implementation:
    allOf:
    - $ref: '#/definitions/Asset'
    - type: object
      properties:
        description:
          type: string
        title:
          type: string
        component:
          type: array
          items:
            $ref: '#/definitions/Component'
        versions:
          $ref: '#/definitions/ImplementationVersion'
        language:
          enum: *PROGRAMMING_LANGUAGE
  ImplementationVersion:
    allOf:
    - $ref: '#/definitions/Resource'
    - type: object
      properties:
        version:
          type: string
        implementation:
          type: array
          items:
            $ref: '#/definitions/Implementation'
        apiVersion:
          type: array
          items:
            $ref: '#/definitions/ApiVersion'
  KeyPair:
    allOf:
    - $ref: '#/definitions/Resource'
    - type: object
      properties:
        privateKey:
          type: string
        publicKey:
          type: string
  Library:
    allOf:
    - $ref: '#/definitions/Asset'
    - type: object
      properties:
        type:
          enum: *LIBRARY_TYPE
        component:
          type: array
          items:
            $ref: '#/definitions/Component'
        versions:
          $ref: '#/definitions/LibraryApiVersion'
        language:
          enum: *PROGRAMMING_LANGUAGE
  LibraryApiVersion:
    allOf:
    - $ref: '#/definitions/Resource'
    - type: object
      properties:
        apiVersion:
          type: array
          items:
            $ref: '#/definitions/ApiVersion'
        library:
          type: array
          items:
            $ref: '#/definitions/Library'
        sourceRepositoryStatus:
          enum: *RESOURCE_STATUS
        pipelineStatus:
          enum: *RESOURCE_STATUS
  Pipeline:
    allOf:
    - $ref: '#/definitions/Resource'
    - type: object
      properties:
        provider:
          type: string
        providerId:
          type: string
        credentialId:
          type: string
        sourceRepository:
          type: array
          items:
            $ref: '#/definitions/SourceRepository'
        path:
          type: string
        template:
          enum: *PIPELINE_TEMPLATE
        asset:
          $ref: '#/definitions/Asset'
  Resource:
    type: object
    properties:
      path:
          type: string
      role:
          type: string
      metadata:
          type: object
          additionalProperties:
            type: object
      status:
          enum: *RESOURCE_STATUS
      createdBy:
          type: string
      updatedBy:
          type: string
      createdAt:
          type: string
      updatedAt:
          type: string
  Cluster:
    allOf:
    - $ref: '#/definitions/Resource'
    - type: object
      properties:
        providerId:
          type: string
        provider:
          type: string
        packageManagerManaged:
          enum: *PACKAGE_TYPE
  RuntimeEnvironment:
    allOf:
    - $ref: '#/definitions/Resource'
    - type: object
      properties:
        providerId:
          type: string
        provider:
          type: string
        description:
          type: string
        labels:
          type: string
        owner:
          type: array
          items:
            $ref: '#/definitions/User'
  RuntimeAppInstance:
    type: object
    properties:
      providerId:
          type: string
      name:
          type: string
      status:
          enum: *RuntimeAppInstanceStatus
  RuntimeJob:
    type: object
    properties:
      providerId:
          type: string
      status:
          enum: *RuntimeAppInstanceStatus
  RuntimeAppService:
    type: object
    properties:
      name:
          type: string
      providerId:
          type: string
      status:
          type: object
          additionalProperties:
            type: object
  RuntimeVolume:
    type: object
    properties:
      name:
          type: string
      providerId:
          type: string
      space:
          type: string
      status:
          enum: *RuntimeJobStatus
  RuntimeContainer:
    type: object
    properties:
      name:
          type: string
      providerId:
          type: string
      image:
          type: string
      imageHash:
          type: string
      memoryLimit:
          type: string
      cpuLimit:
          type: string
      status:
          enum: *RuntimeContainerStatus
  RuntimeEnvironmentBackup:
    type: object
    properties:
      date:
          type: string
      providerId:
          type: string
      status:
          type: string
  RuntimeHttpLoadBalancer:
    type: object
    properties:
      name:
          type: string
      providerId:
          type: string
      hostname:
          type: string
      port:
          type: string
      rewriteUrl:
          type: string
  RuntimeHttpLoadBalancerForwarding:
    type: object
    properties:
      rule:
          type: string
      service:
          type: string
      port:
          type: string
  SourceRepository:
    allOf:
    - $ref: '#/definitions/Resource'
    - type: object
      properties:
        provider:
          type: string
        providerId:
          type: string
        path:
          type: string
        sshUrl:
          type: string
        httpUrl:
          type: string
        webUrl:
          type: string
        branchs:
          type: array
          items:
            type: string
  User:
    allOf:
    - $ref: '#/definitions/Resource'
    - type: object
      properties:
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
        password:
          type: string
